<div style="width:85%; display:flex; align-items:center; justify-content:center; background:#075E54; padding:0.7em 1.2em; border-radius:6px; margin-bottom:1.2em; box-shadow:0 2px 8px rgba(0,0,0,0.04); border:1px solid #222; position:relative;">
    <div style="width:100%; display:flex; justify-content:center;">
        <button type="button" class="add-author-btn" style="background:#25D366; color: black; border:none; border-radius:4px; padding:0.4em 1.2em; font-size:1em; cursor:pointer; font-weight:bold; box-shadow:0 1px 4px rgba(0,0,0,0.08);">Autor hinzuf체gen</button>
    </div>
</div>
<ul class="elements-list">
  {% for a in authors %}
  <li class="{% if a.id == author.id %}active{% endif %}">
    <a href="{{ url_for('profile.author_profile', author_id=a.id) }}" style="display: flex; align-items: center;">
      <div class="avatar">{{ a.name[0] }}</div>
      <div style="flex: 1;">
        <strong>{{ a.name }}</strong>
        <p>{{ a.job or "Beruf unbekannt" }}</p>
      </div>
    </a>
  </li>
  {% endfor %}
</ul>
<!-- Author Add Modal -->
<div id="add-author-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.25); z-index:1000; align-items:center; justify-content:center;">
  <div style="background:#fff; padding:2em 2em 1.5em 2em; border-radius:10px; box-shadow:0 4px 24px rgba(0,0,0,0.18); min-width:320px; max-width:90vw;">
    <h2 style="margin-top:0; margin-bottom:1em; font-size:1.2em; color:#075E54;">Autor hinzuf체gen</h2>
    <form id="add-author-form">
      <div style="margin-bottom:0.8em;"><label for="author-name" style="font-weight:bold;">Name:</label><br><input type="text" id="author-name" name="name" required style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;" placeholder="Name"></div>
      <div style="margin-bottom:0.8em;"><label for="author-age" style="font-weight:bold;">Alter:</label><br><input type="number" id="author-age" name="age" min="0" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;" placeholder="Alter"></div>
      <div style="margin-bottom:0.8em;"><label for="author-gender" style="font-weight:bold;">Geschlecht:</label><br><select id="author-gender" name="gender" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;"><option value="">Geschlecht</option><option value="m채nnlich">M채nnlich</option><option value="weiblich">Weiblich</option><option value="divers">Divers</option></select></div>
      <div style="margin-bottom:0.8em;"><label for="author-first-language" style="font-weight:bold;">Muttersprache:</label><br><input type="text" id="author-first-language" name="first_language" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;" placeholder="Muttersprache"></div>
      <div style="margin-bottom:0.8em;"><label for="author-languages" style="font-weight:bold;">Weitere Sprachen:</label><br><input type="text" id="author-languages" name="languages" placeholder="Weitere Sprachen" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;"></div>
      <div style="margin-bottom:0.8em;"><label for="author-region" style="font-weight:bold;">Region:</label><br><input type="text" id="author-region" name="region" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;" placeholder="Region"></div>
      <div style="margin-bottom:1.2em;"><label for="author-job" style="font-weight:bold;">Beruf:</label><br><input type="text" id="author-job" name="job" style="width:100%; padding:0.4em; border-radius:4px; border:1px solid #ccc;" placeholder="Beruf"></div>
      <div style="display:flex; justify-content:flex-end; gap:1em;">
        <button type="submit" style="background:#25D366; color:#fff; border:none; border-radius:4px; padding:0.5em 1.4em; font-size:1em; font-weight:bold; cursor:pointer;">Speichern</button>
        <button type="button" id="cancel-add-author" style="background:#dc3545; color:#fff; border:none; border-radius:4px; padding:0.5em 1.4em; font-size:1em; font-weight:bold; cursor:pointer;">Abbrechen</button>
      </div>
    </form>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var addBtn = document.querySelector('.add-author-btn');
  var modal = document.getElementById('add-author-modal');
  var cancelBtn = document.getElementById('cancel-add-author');
  addBtn.addEventListener('click', function() {
    modal.style.display = 'flex';
  });
  cancelBtn.addEventListener('click', function() {
    modal.style.display = 'none';
    document.getElementById('add-author-form').reset();
  });
  document.getElementById('add-author-form').onsubmit = function(e) {
    e.preventDefault();
    // Collect all modal input values
    var name = document.getElementById('author-name').value;
    var age = document.getElementById('author-age').value;
    var gender = document.getElementById('author-gender').value;
    var first_language = document.getElementById('author-first-language').value;
    var languages = document.getElementById('author-languages').value;
    var region = document.getElementById('author-region').value;
    var job = document.getElementById('author-job').value;
    // Send to Flask backend
    fetch('/add_author', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        name: name,
        age: age,
        gender: gender,
        first_language: first_language,
        languages: languages,
        region: region,
        job: job
      })
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        modal.style.display = 'none';
        this.reset();
        window.location.reload();
      } else {
        alert('Fehler beim Speichern!');
      }
    })
    .catch(() => {
      alert('Fehler beim Speichern!');
    });
  };
});
</script>
